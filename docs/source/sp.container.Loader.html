<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='sp-Container'>/**
</span> * Solar Playground container scenario loader
 *
 * @class sp.Container
 * @mixins OO.EventEmitter
 *
 * @param {Object} [config] Configuration object
 */
sp.container.Loader = function SpContainerLoader( config ) {
	// Mixin constructors
	OO.EventEmitter.call( this );

	this.config = config || {};
};

/* Inheritance */
OO.mixinClass( sp.container.Loader, OO.EventEmitter );

<span id='sp-Container-method-loadFromFile'>/**
</span> * Load a scenario
 * @param {String} scenarioName Scenario name. The system will search for
 *  an ajax response from source &#39;scenario.[name].json&#39; in the scenario
 *  directory.
 */
sp.container.Loader.prototype.loadFromFile = function ( scenarioName, filename ) {
	var deferred = $.Deferred();

	$.getJSON( filename )
		.done( $.proxy( function ( response ) {
			deferred.resolve( response );
		}, this ) )
		.fail( function () {
			sp.log( &#39;Error&#39;, &#39;Scenario &#39; + targetName + &#39; not found in directory &quot;&#39; + targetDir + &#39;&quot;&#39; );
			deferred.reject();
		} );

	return deferred;
};

<span id='sp-Container-method-loadFromObject'>/**
</span> * Load and run a scenario
 * @param {Object} scenarioObject Scenario configuration object
 * @fires scenarioLoaded
 */
sp.container.Loader.prototype.loadFromObject = function ( scenarioObject ) {
	var objList;

	// TODO: Validate the scenario object before loading

	scenarioObject = scenarioObject || {};

	scenario = new sp.data.Scenario( this, scenarioObject );
	this.setScenario( scenario );

	// Draw initial frame
//	this.scenario.draw( 0 );

	// Add pov objects to gui
	objList = this.scenario.getAllObjects();
	for ( o in objList ) {
		this.gui.addToPOVList(
			o,
			objList[o].getName()
		);
	}

	this.emit( &#39;scenarioLoaded&#39;, this.scenario );
};
</pre>
</body>
</html>
