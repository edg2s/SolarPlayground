<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='sp-System'>/**
</span> * Solar Playground system controller
 *
 * @class sp.System
 * @mixins OO.EventEmitter
 *
 * @param {Object} [config] Configuration object
 */
sp.System = function SpSystem( config ) {
	var defaultConfig;

	// Mixin constructors
	OO.EventEmitter.call( this );

	// Containers holder
	this.containers = {};

	config = config || {};

	defaultConfig = {
		scenario_dir: &#39;scenarios&#39;, // Default directory unless otherwise specified
		scenario_prefix: &#39;scenario.&#39;, // Default scenario file prefix
		directory_sep: &#39;/&#39;,
		width: $( window ).width() - 100,
		height: $( window ).height() - 100
	};

	// Extend default global options
	this.config = $.extend( true, defaultConfig, config );
};

/* Inheritance */
OO.mixinClass( sp.System, OO.EventEmitter );

/* Methods */

<span id='sp-System-method-setContainer'>/**
</span> * Add a container
 * @param {string} container_id The id of the DOM that this container
 * will be attached to
 * @param {Object} [config] Configuration object
 * @throws {Error} If container_id is undefined or empty
 * @return {sp.Container} The new container
 */
sp.System.prototype.setContainer = function ( container_id, config ) {
	if ( !container_id ) {
		throw Error( &#39;sp.System.setContainer must supply a valid container_id.&#39; );
	}

	// Add a container
	this.containers[container_id] = new sp.container.Manager( {
		&#39;container&#39;: &#39;#&#39; + container_id,
		&#39;width&#39;: config.width || this.config.width,
		&#39;height&#39;: config.height || this.config.height,
		scenario_dir: this.config.scenario_dir,
		directory_sep: this.config.directory_sep,
		scenario_prefix: config.scenario_prefix || this.config.scenario_prefix,
		// TODO: When &#39;build&#39; mode is created, it should be either
		// enabled right on instantiation or allow to be added later
		buildMode: false
	} );

	return this.containers[container_id];
};

<span id='sp-System-method-getContainer'>/**
</span> * Retrueve the container by its id
 * @param {string} container_id The id of the DOM that this container
 * is attached to
 * @throws {Error} If there are no containers defined
 * @returns {sp.Container|null} The container
 */
sp.System.prototype.getContainer = function ( container_id ) {
	if ( !this.containers ) {
		throw Error( &#39;Cannot get container, no containers are defined.&#39; );
	}
	return this.containers[container_id];
};

<span id='sp-System-method-getConfig'>/**
</span> * Get configuration option or full configuration object.
 * @param {string} [option] Configuration key
 * @returns {string|Object} Configuration object
 */
sp.System.prototype.getConfig = function ( option ) {
	if ( this.config &amp;&amp; option ) {
		return this.config[option];
	}
	return this.config;
};
</pre>
</body>
</html>
